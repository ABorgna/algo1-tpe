
\begin{problema}{stockBebidasL}{l: Local, b:Bebida}{Cantidad}
\end{problema}

\begin{problema}{stockSandwichesL}{l: Local, h:Hamburguesa}{Cantidad}
\end{problema}

\begin{problema}[bebidas]{bebidasDelLocalL}{l: Local}{[Bebida]}
    \asegura{mismos(\res,bebidasDelLocal(l))}
\end{problema}

\begin{problema}{sandwichesDelLocalL}{l: Local}{[Hamburguesa]}
\end{problema}

\begin{problema}{empleadosL}{l: Local}{[Empleado]}
\end{problema}

\begin{problema}{desempleadosL}{l: Local}{[Empleado]}
\end{problema}

\begin{problema}[energia]{energiaEmpleadoL}{l: Local, e:Empleado}{Energia}
    \requiere{e \in empleados(l)}
    \asegura{\res == energiaEmpleado(l,e)}
\end{problema}

\begin{problema}{ventasL}{l: Local}{[Pedido]}
\end{problema}

\begin{problema}{unaVentaCadaUno}{l:Local}{\bool}
\end{problema}

\begin{problema}{venderL}{l: Local, p:Pedido}{}
\end{problema}

\begin{problema}{candidatosAEmpleadosDelMesL}{l: Local}{[Empleado]}
    \requiere{|empleados(l)| > 0}
    \asegura{|\res| > 0}
    \asegura{mismos(\res, [e \: | \: e \selec empleados(l), ventasEchas(l,e) == maxVentas(l), \\ combosVendidos(l,e) == maxCombos(l,maxVentas(l))])}

    \medskip

    \aux{maxVentas}{l : Local}{\ent}{
        max([ventasEchas(l,e) \: | \: e \selec empleados(l)])
    }
    \aux{maxCombos}{l : Local, ventas : \ent}{\ent}{ \\
        max([combosVendidos(l,e) \: | \: e \selec empleados(l), ventasEchas(l,e) == ventas])
    }
\end{problema}

\begin{problema}{sancionL}{l: Local, e:Empleado, n:Energia}{}
\end{problema}

\begin{problema}{elVagonetaL}{l: Local}{Empleado}
\end{problema}

\begin{problema}{anularPedidoL}{l: Local, n: \ent}{}
\end{problema}

\begin{problema}{agregarComboAlPedidoL}{l: Local, c: Combo, n:\ent}{}
    \requiere[pedidoValido]{(\exists p \selec ventas(l)) numero(p)==n}
    \requiere[hayBebidas]{bebida(c) \in bebidasDelLocal(l) \land stockBebidas(l,bebida(c)) > 0}
    \requiere[haySandwiches]{sandwich(c) \in sandwichesDelLocal(l) \land stockSandwiches(l,sandwich(c)) > 0}
    \requiere[sigueEmpleado]{empleado(l,n) \in empleados(l)}
    \requiere[energiaSuficiente]{energiaEmpleado(l,empleado(l,n)) \ge dificultad(c)}

    \medskip

    \modifica{l}

    \medskip

    \asegura{mismos(bebidasDelLocal(l), bebidasDelLocal(pre(l)))}
    \asegura{mismos(sandwichesDelLocal(l), sandwichesDelLocal(pre(l)))}
    \asegura{mismos(empleados(l), empleados(pre(l))}
    \asegura{mismos(desempleados(l), desempleados(pre(l))}
    \asegura{
        (\forall b \in bebidasDelLocal(l)) \\
        stockBebidas(l,b) == stockBebidas(pre(l),b) - \beta(b == bebida(c))
    }
    \asegura{
        (\forall s \in sandwichesDelLocal(l)) \\
        stockSandwiches(l,s) == stockSandwiches(pre(l),s) - \beta(s == sandwich(c))
    }
    \asegura[conservacionDeLaEnergia]{
        (\forall e \in empleados(l)) \\
        energiaEmpleado(l,e) == energiaEmpleado(pre(l),e) - \beta(e == empleado(pre(l),n)) * dificultad(c)
    }
    \asegura[conservaVentas]{ \\
        |ventas(l)| == |ventas(pre(l))| \land \\
        (\forall i \selec [0 \ldots |ventas(l)|), i \neq posPedido(pre(l),n)) ventas(l)[i] == ventas(pre(l))[i]
    }
    \asegura[agregaCombo]{ \\
        numero(ventas(l)[\: posPedido(pre(l),n) \:]) == numero(pedido(pre(l),n)) \land \\
        atendio(ventas(l)[\: posPedido(pre(l),n) \:]) == atendio(pedido(pre(l),n)) \land \\
        combos(ventas(l)[\: posPedido(pre(l),n) \:]) == combos(pedido(pre(l),n)) ++ [c]
    }

    \medskip

    \aux{pedido}{l : Local, n : \ent}{Pedido}{
        cab([p \: | \: p \selec ventas(l), numero(p) == n])
    }
    \aux{posPedido}{l : Local, n : \ent}{\ent}{
        find(ventas(l),pedido(l,n))
    }
    \aux{empleado}{l : Local, n : \ent}{Empleado}{
        atendio(pedido(l,n))
    }
\end{problema}

